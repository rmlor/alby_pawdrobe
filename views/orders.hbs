<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Manage Orders</title>
    <link rel="stylesheet" type="text/css" href="/css/table.css">
    <link rel="stylesheet" type="text/css" href="/css/modal.css">
</head>
<body>
    <h1>Order Hub - Delivering Dreams</h1>
    <p>Track order information, shipping details, and product customizations</p>

    <!-- Orders Table -->
    <table id="orders-table" border="1">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Dog ID</th>
                <th>Address ID</th>
                <th>Order Date</th>
                <th>Gift Note</th>
                <th>Custom Request</th>
                <th>Status</th>
                <th>Shipped Date</th>
                <th>Delivered Date</th>
                <th>Order Products</th>
                <th>Order Tools</th>
            </tr>
        </thead>
        <tbody>
            {{#each data}}
            <tr data-value="{{this.orderID}}"> 
                <td>{{this.orderID}}</td>
                <td>{{this.dogID}}</td>
                <td>{{this.addressID}}</td>
                <td>{{this.orderDate}}</td>
                <td>{{this.orderGiftNote}}</td>
                <td>{{this.orderCustomRequest}}</td>
                <td>{{this.orderStatus}}</td>
                <td>{{this.orderShippedDate}}</td>
                <td>{{this.orderDeliveredDate}}</td>
                <td>
                    <button class="manage-button" data-order-id="{{this.orderID}}">Manage</button>
                </td>
                <td>
                    <button class="update-button" data-order-id="{{this.orderID}}">Update</button>
                    <button class="delete-button" onclick="deleteOrder({{this.orderID}})">Delete</button>
                </td>
            </tr>
            {{/each}} 
        </tbody>
    </table>

    <!-- Add Order Button -->
    <button id="add-order-button">Add New Order</button>

    <!-- Add Order Modal -->
    <div id="add-order-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" data-modal-id="add-order-modal">&times;</span>
            <h2>Add New Order</h2>
            <form id="add-order-form">
                <label for="dogID">Dog ID:</label>
                <select id="dogID" name="dogID" required></select>

                <label for="addressID">Address ID:</label>
                <select id="addressID" name="addressID" required></select>

                <label for="orderDate">Order Date:</label>
                <input type="date" id="orderDate" name="orderDate" required />

                <label for="orderGiftNote">Gift Note:</label>
                <input type="text" id="orderGiftNote" name="orderGiftNote" />

                <label for="orderCustomRequest">Custom Request:</label>
                <select id="orderCustomRequest" name="orderCustomRequest">
                    <option value="">None</option>
                    <option value="Gift Wrap">Gift Wrap</option>
                    <option value="Rush Order">Rush Order</option>
                    <option value="Sustainable">Sustainable</option>
                </select>

                <label for="orderStatus">Status:</label>
                <select id="orderStatus" name="orderStatus" required>
                    <option value="Received">Received</option>
                    <option value="Preparing">Preparing</option>
                    <option value="Packing">Packing</option>
                    <option value="Shipped">Shipped</option>
                    <option value="Delivered">Delivered</option>
                    <option value="Delayed">Delayed</option>
                    <option value="Canceled">Canceled</option>
                    <option value="Returned">Returned</option>
                </select>

                <label for="orderShippedDate">Shipped Date:</label>
                <input type="date" id="orderShippedDate" name="orderShippedDate" />

                <label for="orderDeliveredDate">Delivered Date:</label>
                <input type="date" id="orderDeliveredDate" name="orderDeliveredDate" />

                <button type="submit">Add Order</button>
                <button type="button" id="cancel-add-order">Cancel Order</button>
            </form>
        </div>
    </div>

    <div id="update-order-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" data-modal-id="update-order-modal">&times;</span>
            <h2>Update Order</h2>
            <form id="update-order-form">
                <input type="hidden" id="orderID" name="orderID">

                <label for="updateAddressID">Address ID:</label>
                <select id="updateAddressID" name="addressID" required></select>

                <label for="updateGiftNote">Gift Note:</label>
                <input type="text" id="updateGiftNote" name="orderGiftNote">

                <label for="updateCustomRequest">Custom Request:</label>
                <select id="updateCustomRequest" name="orderCustomRequest">
                    <option value="">None</option>
                    <option value="Gift Wrap">Gift Wrap</option>
                    <option value="Rush Order">Rush Order</option>
                    <option value="Sustainable">Sustainable</option>
                </select>

                <label for="updateOrderStatus">Status:</label>
                <select id="updateOrderStatus" name="orderStatus" required>
                    <option value="Received">Received</option>
                    <option value="Preparing">Preparing</option>
                    <option value="Packing">Packing</option>
                    <option value="Shipped">Shipped</option>
                    <option value="Delivered">Delivered</option>
                </select>
                <label for="updateShippedDate">Shipped Date:</label>
                <input type="date" id="updateShippedDate" name="orderShippedDate" />

                <label for="updateDeliveredDate">Delivered Date:</label>
                <input type="date" id="updateDeliveredDate" name="orderDeliveredDate" />

                <button type="submit">Save</button>
                <button type="button" id="cancel-update-order">Cancel</button>
            </form>
        </div>
    </div>
    <!-- Manage Order Products Modal -->
    <div id="order-products-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" data-modal-id="order-products-modal">&times;</span>
            <h2>Manage Products for Order ID: <span id="manageOrderID"></span></h2>

            <!-- Order Products Table -->
            <table id="order-products-table" border="1">
                <thead>
                    <tr>
                        <th>Order Product ID</th>
                        <th>Order ID</th>
                        <th>Product ID</th>
                        <th>Customization</th>
                        <th>Sale Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Populated dynamically by JavaScript -->
                </tbody>
            </table>

            <button id="add-order-product-button">Add Order Product</button>
            <!-- Add New Order Product Form -->
            <div class="hidden">
                <h3 id="add-order-product-title">Add Order Product</h3>
                <form id="add-order-product-form">
                    <label for="productID">Product ID:</label>
                    <select id="productID" name="productID" required></select>

                    <label for="newOrderProductRequest">Customization:</label>
                    <input type="text" id="orderProductRequest" name="orderProductRequest" />

                    <label for="newOrderProductSalePrice">Sale Price:</label>
                    <input type="number" id="orderProductSalePrice" name="orderProductSalePrice" step="0.01" required />

                    <button type="submit">Add Order Product</button>
                    <button type="button" id="cancel-update-order-product">Cancel Order Product</button>
                </form>
            </div>

            <div class="hidden">
                <h3 id="update-order-product-title">Update Order Product</h3>
                <form id="update-order-product-form">
                    <input type="hidden" id="orderProductID" name="orderProductID">

                    <label for="productID">Product ID:</label>
                    <select id="productID" name="productID" required>
                        <!-- Dynamically Populated -->
                    </select>

                    <label for="updateOrderProductRequest">Customization:</label>
                    <input type="text" id="updateOrderProductRequest" name="orderProductRequest">

                    <label for="updateOrderProductSalePrice">Sale Price:</label>
                    <input type="number" id="updateOrderProductSalePrice" name="orderProductSalePrice" step="0.01" required>

                    <button type="submit">Save</button>
                    <button type="button" id="cancel-update-order-product">Cancel</button>
                </form>
            </div>
        </div>
    </div>

    <script src="/js/orders.js"></script>
</body>
</html>
